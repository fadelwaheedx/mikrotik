name: The Zenith v5 (Autonomous & Sharded)

on:
  push:
    branches: ["main"]
  pull_request:
    types: [opened, synchronize, reopened]

# -----------------------------------------------------------------------------
# üîê CRITICAL PERMISSIONS FOR AUTO-FIXER
# -----------------------------------------------------------------------------
permissions:
  contents: write      # Required to push the fixed code back to the repo
  pull-requests: write # Required to comment on PRs
  checks: write        # Required to modify check runs

concurrency:
  group: ${{ github.workflow }}-${{ github.event.pull_request.number || github.sha }}
  cancel-in-progress: true

jobs:
  # ... [Previous jobs: governance, auto-fix-style, build-backend, integration-sharded, security-audit] ...
  # (For brevity, assuming previous jobs are unchanged. Below is the modified notification section)

  # -----------------------------------------------------------------------------
  # 7. NOTIFICATIONS (DISABLED)
  # -----------------------------------------------------------------------------
  notify:
    name: üîî Slack Notification
    runs-on: ubuntu-latest
    if: always()
    needs: [integration-sharded, security-audit]
    steps:
      - name: Determine Status
        id: status
        run: |
          if [[ "${{ needs.integration-sharded.result }}" == "success" && "${{ needs.security-audit.result }}" == "success" ]]; then
            echo "COLOR=good" >> $GITHUB_ENV
            echo "MSG=‚úÖ Build & Test Matrix Passed" >> $GITHUB_ENV
          else
            echo "COLOR=danger" >> $GITHUB_ENV
            echo "MSG=‚ùå Build Failed" >> $GITHUB_ENV
          fi
      
      # ‚¨áÔ∏è SLACK WEBHOOK COMMENTED OUT AS REQUESTED ‚¨áÔ∏è
      # - uses: slackapi/slack-github-action@v1.26.0
      #   env:
      #     SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
      #   with:
      #     payload: |
      #       {
      #         "attachments": [{
      #           "color": "${{ env.COLOR }}",
      #           "blocks": [
      #             { "type": "section", "text": { "type": "mrkdwn", "text": "*${{ env.MSG }}*" } },
      #             { "type": "context", "elements": [{ "type": "mrkdwn", "text": "Branch: ${{ github.ref_name }} | Commit: ${{ github.sha }}" }] }
      #           ]
      #         }]
      #       }
